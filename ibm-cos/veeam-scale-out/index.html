
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>Scale Out Repository with Veeam and IBM COS - IBM Cloud Guides and Examples</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scale-out-veeam-storage-with-ibm-cloud-object-storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IBM Cloud Guides and Examples" class="md-header__button md-logo" aria-label="IBM Cloud Guides and Examples" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM Cloud Guides and Examples
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scale Out Repository with Veeam and IBM COS
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IBM Cloud Guides and Examples" class="md-nav__button md-logo" aria-label="IBM Cloud Guides and Examples" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IBM Cloud Guides and Examples
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Code engine
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code engine" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Code engine
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code-engine/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code-engine/container-image-build-ce/" class="md-nav__link">
        Build a container image from source control using Code Engine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code-engine/cross-account-sync-ce/" class="md-nav__link">
        Cross account Object Storage bucket sync with Code Engine
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Diagrams
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Diagrams" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Diagrams
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagrams/" class="md-nav__link">
        IBM Cloud Diagrams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagrams/basic-dl/" class="md-nav__link">
        Basic Classic Direct Link Diagram
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagrams/basic-vpc/" class="md-nav__link">
        Basic VPC Diagram
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Ibm api
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ibm api" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Ibm api
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-api/" class="md-nav__link">
        IBM Cloud Rest API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-api/private-dns/" class="md-nav__link">
        Private DNS API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-api/search-rest-api-examples/" class="md-nav__link">
        Search API Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-api/vpc-api-examples/" class="md-nav__link">
        Virtual Private Cloud API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Ibm cli
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ibm cli" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Ibm cli
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-cli/" class="md-nav__link">
        IBM Cloud CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-cli/icos/" class="md-nav__link">
        Using the Object Storage CLI Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-cli/resource-search/" class="md-nav__link">
        Searching with the IBM Cloud CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-cli/vpc/" class="md-nav__link">
        Using the VPC CLI Plugin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Ibm cos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ibm cos" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Ibm cos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Scale Out Repository with Veeam and IBM COS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Scale Out Repository with Veeam and IBM COS
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#links" class="md-nav__link">
    Links
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ibm-cloud-pre-work" class="md-nav__link">
    IBM Cloud Pre-Work
  </a>
  
    <nav class="md-nav" aria-label="IBM Cloud Pre-Work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launch-ibm-cloud-shell" class="md-nav__link">
    Launch IBM Cloud Shell
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finding-your-cloud-object-storage-instance-id" class="md-nav__link">
    Finding Your Cloud Object Storage Instance ID:
  </a>
  
    <nav class="md-nav" aria-label="Finding Your Cloud Object Storage Instance ID:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-service-id" class="md-nav__link">
    Create a Service ID
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assign-service-id-an-access-policy" class="md-nav__link">
    Assign Service ID an access policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-service-credentials-for-the-service-id" class="md-nav__link">
    Create Service Credentials for the Service ID
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prepare-windows-server-drive" class="md-nav__link">
    Prepare Windows Server Drive
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-new-veeam-backup-repository" class="md-nav__link">
    Create New Veeam Backup Repository
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-scale-out-storage-to-veeam" class="md-nav__link">
    Add Scale Out Storage to Veeam
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" data-md-state="indeterminate" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Ibm direct link
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ibm direct link" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Ibm direct link
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-direct-link/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-direct-link/classic-direct-link/" class="md-nav__link">
        IBM Cloud Classic Direct Link Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" data-md-state="indeterminate" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Ibm guides tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ibm guides tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Ibm guides tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-guides-tutorials/" class="md-nav__link">
        IBM Cloud Tutorials, Tools, and Guides
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" data-md-state="indeterminate" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Ibm vpc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ibm vpc" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Ibm vpc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-vpc/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ibm-vpc/vpc-vpnaas/" class="md-nav__link">
        Site to Site IPsec Tunnel to IBM Cloud VPC VPNaaS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" data-md-state="indeterminate" type="checkbox" id="__nav_10" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Kubernetes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/icos-sync-iks/" class="md-nav__link">
        Cross account Object Storage bucket sync with free IKS Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/overview/" class="md-nav__link">
        Kubernetes 101 Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/qs-storage/" class="md-nav__link">
        Using QuantaStor as a Persistent Volume Provider for Kubernetes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" data-md-state="indeterminate" type="checkbox" id="__nav_11" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Python examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Python examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/" class="md-nav__link">
        IBM Cloud Python Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_2" data-md-state="indeterminate" type="checkbox" id="__nav_11_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_2">
          Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Containers" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_2">
          <span class="md-nav__icon md-icon"></span>
          Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/Containers/" class="md-nav__link">
        Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/Containers/container-registry/" class="md-nav__link">
        Container Registry Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/Containers/va/" class="md-nav__link">
        Vulnerability Advisor Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_3" data-md-state="indeterminate" type="checkbox" id="__nav_11_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_3">
          IAM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IAM" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_3">
          <span class="md-nav__icon md-icon"></span>
          IAM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/IAM/" class="md-nav__link">
        Configuring Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/IAM/access-groups/" class="md-nav__link">
        Access Group Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_4" data-md-state="indeterminate" type="checkbox" id="__nav_11_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_4">
          Interconnectivity
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Interconnectivity" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_4">
          <span class="md-nav__icon md-icon"></span>
          Interconnectivity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/Interconnectivity/" class="md-nav__link">
        Interconnectivity Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_5" data-md-state="indeterminate" type="checkbox" id="__nav_11_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_11_5">
          VPC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="VPC" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_5">
          <span class="md-nav__icon md-icon"></span>
          VPC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/VPC/" class="md-nav__link">
        Configuring Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python-examples/VPC/create-single-zone-vpc/" class="md-nav__link">
        Single Zone VPC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" data-md-state="indeterminate" type="checkbox" id="__nav_12" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Terraform
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Terraform" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Terraform
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../terraform/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../terraform/ibm-gitlab/" class="md-nav__link">
        Deploying IBM Cloud infrastructure using Terraform and Gitlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../terraform/vpc-consul/" class="md-nav__link">
        Consul cluster in IBM Cloud VPC using Terraform and Ansible
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../terraform/vpc-wireguard/" class="md-nav__link">
        Deploy a Wireguard VPN Server in IBM Cloud VPC using Terraform
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="scale-out-veeam-storage-with-ibm-cloud-object-storage">Scale Out Veeam Storage with IBM Cloud Object Storage</h1>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>IBM Cloud Object Storage bucket. See <a href="https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-getting-started-cloud-object-storage#gs-create-buckets">this guide</a> if you need to create an Object Storage Bucket.</li>
<li>Veeam Backup Server with an un-used local or Block volume drive.</li>
</ul>
<h3 id="steps">Steps</h3>
<ol>
<li><a href="#ibm-cloud-pre-work">IBM Cloud Pre-Work</a></li>
<li><a href="#prepare-windows-server-drive">Prepare Windows server drive to be used with Veeam</a></li>
<li><a href="#create-new-veeam-backup-repository">Create new Backup Repository in Veeam</a></li>
<li><a href="#add-scale-out-storage-to-veeam">Add IBM Cloud Object Storage as a Scale-Out Repository in Veeam</a> </li>
</ol>
<h3 id="links">Links</h3>
<ul>
<li><a href="https://www.ibm.com/cloud/object-storage">IBM Cloud Object Storage</a></li>
<li><a href="https://helpcenter.veeam.com/docs/backup/vsphere/backup_repository_sobr.html?ver=100">Veeam Scale Out Repository</a></li>
<li><a href="https://www.veeam.com/vm-backup-recovery-replication-software.html?ad=menu-products">Veeam Backup and Replication</a></li>
</ul>
<h2 id="ibm-cloud-pre-work">IBM Cloud Pre-Work</h2>
<h3 id="launch-ibm-cloud-shell">Launch IBM Cloud Shell</h3>
<p>Launch <a href="https://cloud.ibm.com/docs/cloud-shell?topic=cloud-shell-getting-started">Cloud Shell</a> to run through the following steps. The icon can be found in the upper right navigation bar in the cloud portal.</p>
<p><img alt="Launch Cloud Shell" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-11-02-05.png" /></p>
<h3 id="finding-your-cloud-object-storage-instance-id">Finding Your Cloud Object Storage Instance ID:</h3>
<p>We will use the <em>resource service-instance</em> operator to get our Cloud Object Storage instance id (GUID). Use the handy <a href="https://stedolan.github.io/jq/">jq</a> utility to only return the GUID.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$ ibmcloud resource service-instance &lt;name-of-icos-instance&gt; --output json <span class="p">|</span> jq -r <span class="s1">&#39;.[].guid&#39;</span>
</code></pre></div>
<p><strong>Note:</strong> You will use the value returned by the above command in another command. Please save it.</p>
<h4 id="create-a-service-id">Create a Service ID</h4>
<p>We will create a service ID to interact with our ICOS bucket. A service ID identifies a service or application similar to how a user ID identifies a user. We can assign specific access policies to the service ID that restrict permissions for using specific services.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>ibmcloud iam service-id-create &lt;name-of-your-service-id&gt; --description <span class="s2">&quot;Service ID for Veeam Scale out repository&quot;</span> --output json
</code></pre></div>
<p>This command simply returns the ID of the service-id that was created. This will be used in place of  in the next command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ibmcloud iam service-id &lt;name-of-your-service-id&gt; --output json <span class="p">|</span> jq -r <span class="s1">&#39;.[].id&#39;</span>
</code></pre></div>
<p><strong>Note:</strong> You will use the value returned by the above command in another command. Please save it.</p>
<h4 id="assign-service-id-an-access-policy">Assign Service ID an access policy</h4>
<p>We will now create an access policy that gives the <em>Service ID</em> write access to a single IBM Cloud Object Storage bucket.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ibmcloud iam service-policy-create &lt;Service ID&gt; --roles Writer --service-name cloud-object-storage --service-instance &lt;Service Instance GUID&gt; --resource-type bucket --resource &lt;bucket-name&gt;
</code></pre></div>
<h4 id="create-service-credentials-for-the-service-id">Create Service Credentials for the Service ID</h4>
<p>Veeam uses HMAC credentials (Secret Key/Access Key) so we will need to generate some from cloud shell. We will be binding these new credentials to our Service ID</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$ ibmcloud resource service-key-create &lt;name of service key&gt; Writer --instance-id &lt;Service Instance GUID&gt; --service-id &lt;Service ID&gt; --parameters <span class="s1">&#39;{&quot;HMAC&quot;:true}&#39;</span>
</code></pre></div>
<p><strong>Note:</strong> Save the <strong>access_key_id</strong> and <strong>secret_access_key</strong> as we will need these when we configure the scale out repository in Veeam.</p>
<h2 id="prepare-windows-server-drive">Prepare Windows Server Drive</h2>
<p>Upon initial login to Windows server you should see Server Manager. If not then launch Server Manager and from the left hand navigation select:</p>
<ul>
<li><strong>File and Storage Services</strong></li>
<li><strong>Disks</strong></li>
<li><strong>The drive we want to use as our new Veeam Backup Repository</strong></li>
</ul>
<p><img alt="Select second drive" src="https://dsc.cloud/quickshare/select-second-drive.png" /></p>
<p>In the Volumes view click on <strong>Tasks</strong> and select <em>New Volume</em>.<br />
<img alt="New Volume" src="https://dsc.cloud/quickshare/volume-tasks-new-volume.png" /></p>
<p>This will start the new Volume Wizard. Under <em>Server and Disk</em> select your local server and the drive where this volume will be created. Click <strong>Next</strong><br />
<img alt="Select server and drive" src="https://dsc.cloud/quickshare/server-and-disks.png" /></p>
<p>For both the <strong>Size</strong> and <strong>Drive Letter</strong> selections you can simply click Next as we are leaving these as default.</p>
<p>When it comes the filesystem we will want to select <em>ReFS</em> for the <em>File System</em> and <em>64K</em> for the <em>Allocation unit size</em> and then click <strong>Next</strong>. After you have reviewed the volume creation details click <strong>Create</strong> to provision the volume.<br />
<img alt="File System Settings" src="https://dsc.cloud/quickshare/file-system-settings.png" /></p>
<p>The drive is now ready to be used with Veeam.</p>
<h2 id="create-new-veeam-backup-repository">Create New Veeam Backup Repository</h2>
<p>From the Veeam Backup and Replication console click <strong>Backup Infrastructure</strong> and then right click on <strong>Backup Repositories</strong> and select <strong>Add backup repository</strong> to launch the Repository creation wizard.</p>
<p><img alt="Add backup repository wizard" src="https://dsc.cloud/quickshare/add-backup-repository.png" /></p>
<p>Select <em>Direct Attached Storage</em> in the first dialog box and <em>Microsoft Windows</em> in the second. Give the backup repository a name and click <strong>Next</strong><br />
<img alt="" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-09-50-40.png" /></p>
<p>Select your local server and click Populate to list locally attached available drives. In my case I select <code>F</code> and select <strong>Next</strong><br />
<img alt="Select Repository Drive" src="https://dsc.cloud/quickshare/select-repo-drive.png" /></p>
<p>For both the <em>Repository</em> and <em>Mount Server</em> dialog boxes you can accept the defaults and just click <strong>Next</strong></p>
<p>On the review dialog box make sure to leave <em>Import existing backups automatically</em> unchecked since we're starting off with a fresh set of backup job. Once you're satisfied everything looks correct click <strong>Apply</strong>.<br />
<img alt="Create repository" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-09-55-55.png" /></p>
<p><strong>Note:</strong> When you see a dialog box asking <em>Change the configuration backup location to the newly created repository?</em> select <strong>No</strong>. If you select <strong>Yes</strong> the backup repository becomes un-usable for Scale out ICOS storage.</p>
<h2 id="add-scale-out-storage-to-veeam">Add Scale Out Storage to Veeam</h2>
<p>From the Veeam Backup and Replication console click on <strong>Backup Infrastructure</strong> and then right click on <strong>Add Scale out repository</strong>:</p>
<p><img alt="Add Scale Out" src="https://dsc.cloud/quickshare/add-scale-out.png" /></p>
<p>Give the new Scale out repository a name and click <strong>Next</strong></p>
<p>. <img alt="Name repository" src="https://dsc.cloud/quickshare/name-scale-out-repo.png" /></p>
<p>Under Performance Tier click <strong>Add</strong> and then select the newly created backup repository.<br />
<img alt="Add backup repository to scale out" src="https://dsc.cloud/quickshare/add-repo-to-scale-out.png" /></p>
<p>Select <em>Extend scale-out with object storage</em> and click the <strong>Add</strong> button. <img alt="x" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-10-06-01.png" /></p>
<p>Select IBM Cloud Object Storage</p>
<p><img alt="x" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-10-07-19.png" /></p>
<p>Add the Cloud Object Storage endpoint for your bucket as well as the HMAC credentials we created earlier. The bucket that I am going to be offloading backups to was created as a us-south regional bucket. As such I am adding the private us-south endpoint <code>s3.private.us-south.cloud-object-storage.appdomain.cloud</code>. To see all available endpoints see <a href="https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-endpoints">Object Storage Endpoints</a>.</p>
<p><img alt="Add endpoint" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-10-09-49.png" /></p>
<p>Next to credentials click Add. This is where you will add the HMAC keys that we generated previously. With those credentials added click Next. You will now select the COS bucket to use. Under Folder selection click <strong>Browse</strong> and click <strong>Add Folder</strong> to create a new directory within the bucket. Click <strong>Next</strong> to get to the Review page. If everything looks good click <strong>Finish</strong>.</p>
<p>You are now dropped back in to the Scale out repository wizard. You can now set the <strong>age out</strong> policy for backups in this backup repository. Make sure the <em>Move backups to object storage</em> checkbox is checked and set your policy. The default is 30 days.</p>
<p><img alt="" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-10-26-45.png" /></p>
<p>Click <strong>Apply</strong> and review the creation details. Click <strong>Finish</strong>.</p>
<p>Make sure to select your newly created backup repository when creating new backup jobs to ensure that your backup roll-off operations run as expected.</p>
<p><img alt="Targeting new backup repository" src="https://dsc.cloud/quickshare/Shared-Image-2020-07-24-10-34-11.png" /></p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Index" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Index
            </div>
          </div>
        </a>
      
      
        
        <a href="../../ibm-direct-link/" class="md-footer__link md-footer__link--next" aria-label="Next: Index" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Index
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.expand", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>